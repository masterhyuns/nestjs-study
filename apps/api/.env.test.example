# ============================================================================
# 테스트 환경 변수 (.env.test)
#
# @description
# 테스트 실행 시 사용되는 환경 변수 설정
#
# @usage
# 1. 이 파일을 복사하여 .env.test 생성
#    cp .env.test.example .env.test
# 2. 테스트 실행
#    pnpm test
#
# @security
# - .env.test는 .gitignore에 포함 (민감 정보 보호)
# - CI에서는 환경 변수로 주입
# - 로컬 개발자마다 다른 설정 가능
#
# @why-separate-env
# 테스트 전용 환경 변수를 분리하는 이유:
# 1. **격리**: 프로덕션/개발 DB와 완전히 분리
# 2. **안전**: 테스트 중 실수로 프로덕션 데이터 손상 방지
# 3. **속도**: 테스트 전용 DB는 최적화 가능 (인덱스 생략 등)
# 4. **일관성**: 모든 개발자가 동일한 테스트 환경
# ============================================================================

# ============================================================================
# 애플리케이션 설정
# ============================================================================

NODE_ENV=test
PORT=12100
API_PREFIX=api

# ============================================================================
# 데이터베이스 설정
# ============================================================================

# PostgreSQL 테스트 DB
# @important 프로덕션 DB와 다른 DB 사용 필수!
# @convention 접미사 _test 사용
DATABASE_URL=postgresql://postgres:postgres@localhost:12001/collaboration_test

# Prisma 설정
DATABASE_POOL_SIZE=5
DATABASE_TIMEOUT=5000

# ============================================================================
# Redis 설정
# ============================================================================

# Redis 테스트 서버
# @important 프로덕션 Redis와 다른 DB 사용
REDIS_HOST=localhost
REDIS_PORT=12002
REDIS_PASSWORD=
REDIS_DB=1

# ============================================================================
# JWT 설정
# ============================================================================

# 테스트용 JWT 시크릿 (고정값 사용)
# @why-fixed-value 테스트 간 일관성 보장
JWT_SECRET=test-jwt-secret-key-for-unit-and-e2e-tests
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# ============================================================================
# CORS 설정
# ============================================================================

CORS_ORIGIN=http://localhost:3001

# ============================================================================
# 로깅 설정
# ============================================================================

# 테스트 중 로그 레벨
# @why ERROR만 출력하면 테스트 출력이 깔끔함
LOG_LEVEL=ERROR

# ============================================================================
# 외부 서비스 (Mock 사용)
# ============================================================================

# 이메일 서비스 (테스트에서는 Mock)
# @important 실제 이메일 발송 금지
EMAIL_SERVICE_ENABLED=false
EMAIL_FROM=test@example.com

# SMS 서비스 (테스트에서는 Mock)
# @important 실제 SMS 발송 금지
SMS_SERVICE_ENABLED=false

# 파일 스토리지 (테스트에서는 로컬/Mock)
STORAGE_PROVIDER=local
STORAGE_LOCAL_PATH=./test-uploads

# ============================================================================
# Rate Limiting 설정
# ============================================================================

# 테스트에서는 Rate Limit 비활성화 또는 높은 값
THROTTLE_TTL=60
THROTTLE_LIMIT=1000

# ============================================================================
# 디버깅 설정
# ============================================================================

# 테스트 디버그 모드
# @usage TEST_DEBUG=true pnpm test
TEST_DEBUG=false

# Prisma 쿼리 로그 (디버깅용)
# @usage 느린 쿼리 찾기
DATABASE_LOG_QUERIES=false
